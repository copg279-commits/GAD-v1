<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POLIC√çA LOCAL ALICANTE - VMP</title>
    <style>
        :root {
            --police-blue: #0a2e52;
            --police-light: #1c4e80;
            --accent: #ffd700;
            --danger: #dc3545;
            --success: #28a745;
            --white: #ffffff;
            --bg: #f4f6f9;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* --- CABECERA PRINCIPAL (DISE√ëO BLANCO INSTITUCIONAL) --- */
        header {
            background-color: var(--white); /* Fondo blanco */
            color: var(--police-blue);      /* Texto azul */
            width: 100%;
            padding: 10px 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-bottom: 5px solid var(--police-blue); /* L√≠nea corporativa abajo */
            position: fixed;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-sizing: border-box;
            height: 100px;
        }

        .header-logo {
            height: 75px; /* Logos grandes */
            width: auto;
            object-fit: contain;
        }

        .header-titles {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            flex-grow: 1;
        }

        header h1 {
            margin: 0;
            font-size: 1.4rem;
            font-weight: 800;
            letter-spacing: 1px;
            text-transform: uppercase;
            line-height: 1.2;
        }
        header h2 {
            margin: 5px 0 0 0;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--police-light);
            text-transform: uppercase;
        }

        /* --- CONTENEDOR PRINCIPAL --- */
        .container {
            margin-top: 120px;
            width: 92%;
            max-width: 600px;
            padding-bottom: 40px;
            flex-grow: 1;
        }

        .card {
            background: var(--white);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
            display: flex;
            flex-direction: column;
            min-height: 300px;
        }

        .question-title {
            color: var(--police-blue);
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--accent);
        }

        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        button.option-btn {
            background-color: var(--police-light);
            color: var(--white);
            border: none;
            padding: 16px 20px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 500;
        }

        button.option-btn:hover {
            background-color: var(--police-blue);
            transform: translateX(5px);
        }

        .controls {
            margin-top: 25px;
            display: flex;
            gap: 10px;
        }

        .btn-control {
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            flex: 1;
        }
        .btn-back { background-color: #90a4ae; color: #37474f; }
        .btn-reset { background-color: var(--accent); color: #000; }

        /* --- MODAL RESULTADOS --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            align-items: center;
            justify-content: center;
            padding: 15px;
            backdrop-filter: blur(4px);
            box-sizing: border-box;
        }

        .modal-content {
            background-color: var(--white);
            border-radius: 15px;
            width: 100%;
            max-width: 550px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            max-height: 95vh;
            animation: slideUp 0.3s ease-out;
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Cabecera del modal (La franja de color) */
        .modal-header-strip {
            padding: 15px;
            text-align: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Colores de estado */
        .header-success { background-color: var(--success); }
        .header-danger { background-color: var(--danger); }
        .header-warning { background-color: #f57f17; }

        .modal-body { 
            padding: 20px; 
            overflow-y: auto; 
        }

        /* ESTRUCTURA: Fila superior con logos e icono */
        .result-top-row {
            display: flex;
            justify-content: space-between; /* Logos a los extremos */
            align-items: center; /* Centrados verticalmente */
            margin-bottom: 20px;
            width: 100%;
        }

        .result-logo-img {
            height: 60px; /* Tama√±o aumentado */
            width: 60px;
            object-fit: contain;
        }

        .result-main-icon {
            font-size: 4rem; /* Icono central grande */
            line-height: 1;
        }

        .result-main-title { 
            text-align: center; 
            font-size: 1.6rem; 
            margin: 0 0 20px 0; 
            color: #333; 
            font-weight: 800; 
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }

        .legal-table {
            width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 0.95rem; border: 1px solid #e0e0e0;
        }
        .legal-table th { text-align: left; padding: 12px; background-color: #f5f7fa; width: 40%; border-bottom: 1px solid #ddd; color: var(--police-blue); }
        .legal-table td { padding: 12px; border-bottom: 1px solid #eee; color: #444; font-weight: 500; }

        .legal-box { padding: 15px; border-radius: 8px; font-size: 0.95rem; line-height: 1.6; text-align: left; margin-top: 15px;}
        .box-penal { background-color: #ffebee; border-left: 6px solid var(--danger); color: #c62828; }
        .box-admin { background-color: #e8f5e9; border-left: 6px solid var(--success); color: #2e7d32; }
        .box-info { background-color: #e3f2fd; border-left: 6px solid var(--police-blue); color: #0d47a1; }

        .modal-footer { padding: 15px; background: #f8f9fa; display: flex; gap: 10px; border-top: 1px solid #eee;}
        .btn-modal-back { flex: 1; padding: 14px; background: #fff; border: 1px solid #ccc; border-radius: 8px; font-weight: bold; cursor: pointer; color: #555; transition: 0.2s;}
        .btn-modal-back:hover { background: #eee; }
        .btn-modal-new { flex: 1; padding: 14px; background: var(--police-blue); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .btn-modal-new:hover { background: var(--police-light); }

    </style>
</head>
<body>

<header>
    <img id="head-logo-left" class="header-logo" alt="Judicial" />
    <div class="header-titles">
        <h1>POLIC√çA LOCAL ALICANTE</h1>
        <h2>CATEGORIZACI√ìN VEH√çCULOS LIGEROS</h2>
    </div>
    <img id="head-logo-right" class="header-logo" alt="GAD" />
</header>

<div class="container">
    <div class="card">
        <div id="question-area"></div>
        <div class="controls">
            <button class="btn-control btn-back" id="btn-back-main" onclick="app.prevStep()">‚¨ÖÔ∏è Atr√°s</button>
            <button class="btn-control btn-reset" onclick="app.resetApp()">Reiniciar üîÑ</button>
        </div>
    </div>
</div>

<div id="result-modal" class="modal">
    <div class="modal-content">
        <div id="modal-header-strip" class="modal-header-strip">
            DICTAMEN T√âCNICO POLICIAL
        </div>

        <div class="modal-body">
            <div class="result-top-row">
                <img id="res-logo-left" class="result-logo-img" alt="Judicial" />
                <span id="res-icon" class="result-main-icon"></span>
                <img id="res-logo-right" class="result-logo-img" alt="GAD" />
            </div>

            <h3 id="res-title" class="result-main-title"></h3>
            
            <table class="legal-table">
                <tr><th>Permiso</th><td id="res-permiso"></td></tr>
                <tr><th>Seguro</th><td id="res-seguro"></td></tr>
                <tr><th>Matr√≠cula</th><td id="res-matricula"></td></tr>
                <tr><th>Casco</th><td id="res-casco"></td></tr>
            </table>
            
            <div id="res-legal-box" class="legal-box"></div>
        </div>
        
        <div class="modal-footer">
            <button class="btn-modal-back" onclick="app.closeModal()">üîô Corregir</button>
            <button class="btn-modal-new" onclick="app.resetApp()">üîÑ Nueva Consulta</button>
        </div>
    </div>
</div>

<script>
    // --- CONFIGURACI√ìN DE NOMBRES DE ARCHIVO PARA GITHUB ---
    // Sube las im√°genes a tu repositorio con estos nombres exactos:
    
    const LOGO_JUDICIAL = "judicial.png";
    const LOGO_GAD = "logogad.png";

    // ------------------------------------------------------------------

    // Inyectar logos al cargar
    window.onload = function() {
        // Asignaci√≥n de rutas
        const logos = [
            'head-logo-left', 'head-logo-right', 
            'res-logo-left', 'res-logo-right'
        ];
        
        document.getElementById('head-logo-left').src = LOGO_JUDICIAL;
        document.getElementById('head-logo-right').src = LOGO_GAD;
        document.getElementById('res-logo-left').src = LOGO_JUDICIAL;
        document.getElementById('res-logo-right').src = LOGO_GAD;
        
        // Manejo de errores por si no se encuentran las im√°genes
        logos.forEach(id => {
            const img = document.getElementById(id);
            if(img) {
                img.onerror = function() {
                    console.warn("No se encuentra la imagen: " + this.src);
                    this.style.visibility = 'hidden'; // Ocultar si falla
                };
            }
        });

        // Iniciar App
        app.renderStep('start');
    };

    const app = {
        // --- BASE DE DATOS DE RESULTADOS ---
        resultsDB: {
            "r_vmp_legal": {
                title: "VMP LEGAL", icon: "üõ¥", style: "admin",
                perm: "Ninguno", seg: "Recom./Oblig. econ.", mat: "No", casco: "OBLIGATORIO",
                text: "‚úÖ <b>VMP APTO</b><br>R√©gimen administrativo. Edad m√≠n 16 a√±os (Alicante)."
            },
            "r_epac": {
                title: "BICICLETA EPAC", icon: "üö≤", style: "admin",
                perm: "Ninguno", seg: "No", mat: "No", casco: "Recomendado",
                text: "‚úÖ <b>BICI ASISTIDA</b><br>Motor ‚â§250W y corte a 25km/h."
            },
            "r_ciclo": {
                title: "CICLO", icon: "üö≤", style: "admin",
                perm: "Ninguno", seg: "No", mat: "No", casco: "Seg√∫n v√≠a/edad",
                text: "‚úÖ <b>BICICLETA</b><br>Propulsi√≥n muscular."
            },
            "r_juguete": {
                title: "JUGUETE", icon: "üß∏", style: "info",
                perm: "No", seg: "No", mat: "No", casco: "No",
                text: "‚ÑπÔ∏è <b>USO PEATONAL</b><br>Velocidad < 6 km/h."
            },
            "r_l1e_a": {
                title: "L1e-A (CICLO MOTOR)", icon: "üõµ", style: "penal",
                perm: "AM / B", seg: "S√≠", mat: "S√≠", casco: "S√≠",
                text: "‚ö†Ô∏è <b>VEH√çCULO A MOTOR</b><br>Aplica Art. 379 y 384 CP."
            },
            "r_l1e_b": {
                title: "L1e-B (CICLOMOTOR 2R)", icon: "üõµ", style: "penal",
                perm: "AM / B", seg: "S√≠", mat: "S√≠", casco: "S√≠",
                text: "‚ö†Ô∏è <b>CICLOMOTOR 2 RUEDAS</b><br>Velocidad >25km/h o >4000W.<br>Inmovilizaci√≥n y V√≠a Penal."
            },
            "r_l2e": {
                title: "L2e (CICLOMOTOR 3R)", icon: "üõ∫", style: "penal",
                perm: "AM / B", seg: "S√≠", mat: "S√≠", casco: "S√≠",
                text: "‚ö†Ô∏è <b>CICLOMOTOR 3 RUEDAS</b><br>Velocidad ‚â§45km/h y Potencia ‚â§4000W.<br>Inmovilizaci√≥n y V√≠a Penal."
            },
            "r_l6e": {
                title: "L6e (CUADRICICLO LIGERO)", icon: "üöô", style: "penal",
                perm: "AM / B", seg: "S√≠", mat: "S√≠", casco: "S√≠/Cintur√≥n",
                text: "‚ö†Ô∏è <b>CUADRICICLO LIGERO</b><br>Max 45km/h y Max 6000W.<br>Requiere permiso AM. Aplica CP."
            },
            "r_l3e": {
                title: "L3e (MOTOCICLETA)", icon: "üèçÔ∏è", style: "penal",
                perm: "A1 / A2 / A", seg: "S√≠", mat: "S√≠", casco: "S√≠",
                text: "‚ö†Ô∏è <b>MOTOCICLETA 2 RUEDAS</b><br>Supera 45km/h O supera 4000W.<br>Requiere permiso A1 (o B+3 a√±os seg√∫n potencia)."
            },
            "r_l4e": {
                title: "L4e (MOTO CON SIDECAR)", icon: "üèçÔ∏è", style: "penal",
                perm: "A1 / A2 / A", seg: "S√≠", mat: "S√≠", casco: "S√≠",
                text: "‚ö†Ô∏è <b>MOTO CON SIDECAR (ASIM√âTRICO)</b><br>‚Ä¢ Se rige por permisos de MOTO.<br>‚Ä¢ <b>A1:</b> Si ‚â§ 125cc y 11kW.<br>‚Ä¢ <b>A2/A:</b> Resto de casos.<br>‚Ä¢ <b>Permiso B:</b> Solo v√°lido si tiene 3 a√±os de antig√ºedad y el veh√≠culo es de clase A1."
            },
            "r_l5e": {
                title: "L5e (TRICICLO DE MOTOR)", icon: "üõ∫", style: "penal",
                perm: "B (Coche) / A", seg: "S√≠", mat: "S√≠", casco: "S√≠",
                text: "‚ö†Ô∏è <b>TRICICLO SIM√âTRICO (>45km/h)</b><br>‚Ä¢ <b>PERMISO B:</b> V√°lido. <b>OJO:</b> Si el triciclo supera 15 kW, el conductor debe tener <b>21 A√ëOS</b>.<br>‚Ä¢ <b>PERMISO A:</b> V√°lido siempre.<br>‚Ä¢ <b>PERMISO A1/A2:</b> NO v√°lidos para L5e."
            },
            "r_l7e": {
                title: "L7e (CUADRICICLO PESADO)", icon: "üöú", style: "penal",
                perm: "CLASE B", seg: "S√≠", mat: "S√≠", casco: "S√≠/Cintur√≥n",
                text: "‚ö†Ô∏è <b>CUADRICICLO PESADO</b><br>Supera 45km/h O supera 6000W.<br>Requiere permiso Clase B (Coche)."
            },
            "r_prohibido": {
                title: "PROHIBIDO", icon: "‚õî", style: "danger",
                perm: "-", seg: "-", mat: "-", casco: "-",
                text: "üö´ <b>NO APTO</b><br>No cumple normativa. Denuncia y retirada."
            },
            "r_prohibido_voltaje": {
                title: "ILEGAL (VOLTAJE)", icon: "üîå", style: "danger",
                perm: "-", seg: "-", mat: "-", casco: "-",
                text: "üö´ <b>VOLTAJE PELIGROSO</b><br>Excede 100VCC / 240VAC."
            }
        },

        // --- √ÅRBOL DE DECISI√ìN ---
        steps: {
            start: {
                q: "¬øEl veh√≠culo est√° motorizado?",
                opts: [
                    { t: "S√≠", next: "motor_si" },
                    { t: "No", next: "motor_no" }
                ]
            },
            motor_no: {
                q: "¬øFunciona a pedal o manivela?",
                opts: [
                    { t: "S√≠", next: "pedal_si" },
                    { t: "No", result: "r_juguete" }
                ]
            },
            pedal_si: {
                q: "¬øCu√°ntas ruedas tiene?",
                opts: [
                    { t: "1 rueda", result: "r_prohibido" },
                    { t: "2 o m√°s ruedas", result: "r_ciclo" }
                ]
            },
            motor_si: {
                q: "¬øFunciona con pedales Y el motor es auxiliar?",
                opts: [
                    { t: "S√≠ (Pedelec/H√≠brido)", next: "pedales_aux_si" },
                    { t: "No (Solo acelerador/otro)", next: "pedales_aux_no" }
                ]
            },
            pedales_aux_si: {
                q: "¬øCu√°l es la potencia del motor?",
                opts: [
                    { t: "Hasta 250 W", next: "potencia_250" },
                    { t: "Entre 250 W y 1000 W", next: "potencia_1000" },
                    { t: "M√°s de 1000 W", result: "r_l1e_b" }
                ]
            },
            potencia_250: {
                q: "¬øEl motor se detiene al superar 25 km/h?",
                opts: [
                    { t: "S√≠", result: "r_epac" },
                    { t: "No (Sigue asistiendo)", result: "r_l1e_a" }
                ]
            },
            potencia_1000: {
                q: "¬øHasta qu√© velocidad auxilia el motor?",
                opts: [
                    { t: "Entre 25 y 45 km/h", result: "r_l1e_a" },
                    { t: "M√°s de 45 km/h", result: "r_l3e" }
                ]
            },
            pedales_aux_no: {
                q: "¬øCu√°l es la velocidad m√°xima por construcci√≥n?",
                opts: [
                    { t: "Hasta 6 km/h", result: "r_juguete" },
                    { t: "De 6 a 25 km/h", next: "vel_6_25" },
                    { t: "De 25 a 45 km/h", next: "vel_hasta_45" },
                    { t: "M√°s de 45 km/h", next: "vel_mas_45" }
                ]
            },
            vel_6_25: {
                q: "Velocidad 6-25 km/h. ¬øTiene sill√≠n?",
                opts: [
                    { t: "S√≠", next: "con_sillin_6_25" },
                    { t: "No", next: "check_baterias" }
                ]
            },
            con_sillin_6_25: {
                q: "¬øEs un veh√≠culo autoequilibrado (ej. Segway)?",
                opts: [
                    { t: "S√≠", next: "check_baterias" },
                    { t: "No", next: "check_altura_sillin" } 
                ]
            },
            check_baterias: {
                q: "¬øQu√© voltaje indican las caracter√≠sticas t√©cnicas?",
                opts: [
                    { t: "Hasta 100 VCC / 240 VCA", result: "r_vmp_legal" },
                    { t: "Superior (Alta Tensi√≥n)", result: "r_prohibido_voltaje" }
                ]
            },
            vel_hasta_45: {
                q: "Velocidad 25-45 km/h. ¬øTiene sill√≠n?",
                opts: [
                    { t: "S√≠", next: "check_potencia_45" }, 
                    { t: "No", result: "r_prohibido" }
                ]
            },
            check_potencia_45: {
                q: "Verificaci√≥n de Potencia / Cilindrada:",
                opts: [
                    { t: "‚â§ 50cc o ‚â§ 4000 W", next: "ruedas_4000w" }, 
                    { t: "‚â§ 50cc o 4001 W - 6000 W", next: "ruedas_6000w" }, 
                    { t: "> 50cc o > 6000 W", next: "ruedas_heavy" }
                ]
            },
            ruedas_4000w: {
                q: "Potencia Baja (‚â§4kW). ¬øCu√°ntas ruedas tiene?",
                opts: [
                    { t: "2 Ruedas", result: "r_l1e_b" },
                    { t: "3 Ruedas", result: "r_l2e" },
                    { t: "4 Ruedas", result: "r_l6e" }
                ]
            },
            ruedas_6000w: {
                q: "Potencia Media (4-6kW). ¬øCu√°ntas ruedas tiene?",
                opts: [
                    { t: "2 Ruedas", result: "r_l3e" }, 
                    { t: "3 Ruedas", next: "check_tipo_3_ruedas" }, 
                    { t: "4 Ruedas", result: "r_l6e" }
                ]
            },
            ruedas_heavy: {
                q: "Potencia Alta (>6kW). ¬øCu√°ntas ruedas tiene?",
                opts: [
                    { t: "2 Ruedas", result: "r_l3e" },
                    { t: "3 Ruedas", next: "check_tipo_3_ruedas" }, 
                    { t: "4 Ruedas", result: "r_l7e" } 
                ]
            },
            vel_mas_45: {
                q: "Velocidad > 45 km/h. ¬øTiene sill√≠n?",
                opts: [
                    { t: "S√≠", next: "ruedas_mas_45" },
                    { t: "No", result: "r_prohibido" }
                ]
            },
            ruedas_mas_45: {
                q: "Alta Velocidad. ¬øCu√°ntas ruedas tiene?",
                opts: [
                    { t: "2 Ruedas", result: "r_l3e" }, 
                    { t: "3 Ruedas", next: "check_tipo_3_ruedas" },
                    { t: "4 Ruedas", result: "r_l7e" }  
                ]
            },
            check_tipo_3_ruedas: {
                q: "Veh√≠culo 3 ruedas. ¬øDisposici√≥n de las ruedas?",
                opts: [
                    { t: "Sim√©tricas (Triciclo en eje)", result: "r_l5e" },
                    { t: "Asim√©tricas (Moto con sidecar)", result: "r_l4e" }
                ]
            },
            check_altura_sillin: {
                q: "¬øCu√°l es la altura del sill√≠n (punto R)?",
                opts: [
                    { t: "54 cm o m√°s", next: "check_potencia_45" }, 
                    { t: "Menos de 54 cm", next: "check_baterias" } 
                ]
            }
        },

        historyStack: [],

        dom: {
            qArea: document.getElementById('question-area'),
            modal: document.getElementById('result-modal'),
            btnBackMain: document.getElementById('btn-back-main')
        },

        renderStep: function(key) {
            const step = this.steps[key];
            const d = this.dom;
            let html = `<div class="question-title">${step.q}</div><div class="options-grid">`;
            step.opts.forEach(opt => {
                const action = opt.result 
                    ? `app.showResult('${opt.result}')` 
                    : `app.nextStep('${key}', '${opt.next}')`;
                html += `<button class="option-btn" onclick="${action}">${opt.t} <span>üëâ</span></button>`;
            });
            html += `</div>`;
            d.qArea.innerHTML = html;
            d.btnBackMain.disabled = (this.historyStack.length === 0);
            d.btnBackMain.style.opacity = (this.historyStack.length === 0) ? "0.5" : "1";
        },

        nextStep: function(currentKey, nextKey) {
            this.historyStack.push(currentKey);
            this.renderStep(nextKey);
        },

        prevStep: function() {
            if (this.historyStack.length > 0) {
                const prevKey = this.historyStack.pop();
                this.renderStep(prevKey);
            }
        },

        showResult: function(resultKey) {
            const data = this.resultsDB[resultKey];
            const m = this.dom.modal;
            const strip = document.getElementById('modal-header-strip'); 
            const box = document.getElementById('res-legal-box');
            
            strip.className = "modal-header-strip";
            box.className = "legal-box";

            if (data.style === "penal" || data.style === "danger") {
                strip.classList.add("header-danger"); box.classList.add("box-penal");
            } else if (data.style === "admin") {
                strip.classList.add("header-success"); box.classList.add("box-admin");
            } else {
                strip.classList.add("header-warning"); box.classList.add("box-info");
            }

            document.getElementById('res-icon').innerText = data.icon;
            document.getElementById('res-title').innerText = data.title;
            document.getElementById('res-permiso').innerText = data.perm;
            document.getElementById('res-seguro').innerText = data.seg;
            document.getElementById('res-matricula').innerText = data.mat;
            document.getElementById('res-casco').innerText = data.casco;
            box.innerHTML = data.text;
            m.style.display = 'flex';
        },

        closeModal: function() { this.dom.modal.style.display = 'none'; },
        resetApp: function() { this.closeModal(); this.historyStack = []; this.renderStep('start'); }
    };
</script>
</body>
</html>